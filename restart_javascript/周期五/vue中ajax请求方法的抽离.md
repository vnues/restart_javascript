
vue抽成公共的方法



## vuex方案  --->有点一语惊醒梦中人的感觉
---> 既然你都请求同样的接口 说明需要的数据一样   两个组件就是同样需要这个数据 所以使用vuex

那么就是放在vuex里的action 如果数据格式不一样可以用getter处理完美


## 不想使用vuex

```javascript
export const getUnhandledRecords = (
  page: number,
  limit: number,
  query: string = ''
) => {
  return new Promise((resolve, reject) => {
    window.apis
      .getUnhandledRecords({ query, page, limit })
      .then((res: any) => {
        resolve(res);
      })
      .catch((err: any) => {
        reject(err);
      });
  });
};
```


好像确实合乎规范的是使用vuex

明明之中就形成了系统和规范

而且单页面还有一个作用复用请求 可能会减少请求次数


❗️也就是说你两个不同的组件都要用这套数据  也就是我们应该尽量减少数据请求

直接共用这套数据 而不是再次去请求一次

vuex就来了 我原来的思路是想再次请求一次
所以思路是错误的 遇到不同组件共用同套数据应该是去传递或者拿到，而不是再次去请求生成




但是我们就算不用vuex也不应该想着就去再次请求一遍数据  而是数据传递 这就是单页面的优势


所以遇到一模一样的数据不是想着去请求而是去传递


也就是明明之中vuex就出来了

实际我们可以在组件内写请求方法然后再把写进state
但是现在应该规范起来都抽离在action

## 什么时候需要action
什么时候需要action----->现在我的理解是，不同的组件共用一份数据（而不是状态），数据是请求来的，就放在action，而不是放在组件内
万一另外一个组件有个点击按钮，每次点击都有重新请求的需求，这就必须请求需求了


所以综合起来，我那种promise封装的不好，不适合单页面共用一套数据，不是说除非你不用vuex 即使不用最好的做法你给我传递过去

你想想维护一套数据比维护两套的好吧

## 总结

- 两个组件需要相同的数据，不应该分别请求，来维护自己的两套数据，应该共用，这时候vuex就出来了
- 维护两套比一套数据困难
- 如果这是的vue存的是数据而不是状态，就应该把得到数据的请求方法抽离出来放在action里，而不是在组件里去定义请求方法，实现复用
- 不同组件共用一个请求方法共用数据，就是使用同套数据，要这样想